<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:WindowAttach.Controls">
    <Style TargetType="{x:Type controls:PopupButtonControl}">
        <Setter Property="Padding" Value="10,5" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PopupButtonControl}">
                    <Grid UseLayoutRounding="True">
                        <ToggleButton
                            x:Name="PART_ToggleButton"
                            Padding="{TemplateBinding Padding}"
                            Content="{TemplateBinding Header}"
                            IsChecked="{Binding IsChecked, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                            Style="{TemplateBinding ToggleButtonStyle}"
                            Focusable="False"
                            KeyboardNavigation.IsTabStop="False" />
                        <Popup
                            x:Name="PART_Popup"
                            AllowsTransparency="True"
                            IsOpen="{Binding IsChecked, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                            PlacementTarget="{Binding ElementName=PART_ToggleButton}"
                            StaysOpen="False"
                            Placement="Bottom"
                            Focusable="False"
                            KeyboardNavigation.IsTabStop="False">
                            <Border Background="#E0000000" 
                                    CornerRadius="4" 
                                    Padding="8"
                                    BorderThickness="1"
                                    BorderBrush="#40FFFFFF"
                                    Focusable="False"
                                    KeyboardNavigation.IsTabStop="False">
                                <ContentPresenter Content="{TemplateBinding Content}"
                                                  Focusable="False"
                                                  KeyboardNavigation.IsTabStop="False"/>
                            </Border>
                        </Popup>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>

